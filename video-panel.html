<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Camera Panel - Karaoke Bus</title>
<link rel="stylesheet" href="css/video-panel.css">
<style>
/* âœ¨ LOGOUT BUTTON STYLE - Add this to video-panel.css or inline here */
.logout-button {
  position: absolute;
  top: 20px;
  right: 20px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
  font-size: 14px;
  z-index: 100;
}

.logout-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(239, 68, 68, 0.5);
}

.logout-button:active {
  transform: translateY(0);
}
</style>
</head>
<body>
<div class="container">
<!-- Header -->
<div class="header">
<a href="#" id="back-btn" class="back-button">
<span>â†</span>
<span>Kembali</span>
</a>
<h1>ğŸ¥ Camera Panel</h1>
<p class="subtitle">Streaming ke Display Bus</p>

<!-- âœ¨ LOGOUT BUTTON (NEW!) -->
<button id="logout-btn" class="logout-button">
<span>ğŸšª</span>
<span>Logout</span>
</button>
</div>

<!-- Camera Preview -->
<div class="camera-preview" id="camera-preview">
<video id="local-video" autoplay playsinline muted></video>
<div class="camera-overlay" id="camera-overlay">
<div class="overlay-message">
<span class="icon">ğŸ“·</span>
<p>Kamera Belum Aktif</p>
<button class="btn-primary" id="start-camera-btn">Aktifkan Kamera</button>
</div>
</div>
</div>

<!-- Controls -->
<div class="controls-panel">
<div class="status-bar">
<div class="status-item">
<span class="label">Status:</span>
<span class="value" id="connection-status">Offline</span>
<span class="status-dot" id="status-dot"></span>
</div>
<div class="status-item">
<span class="label">Streaming:</span>
<span class="value" id="streaming-status">Tidak Aktif</span>
</div>
<div class="status-item" id="recording-status-bar" style="display: none;">
<span class="label">Recording:</span>
<span class="value recording-time" id="recording-time">00:00</span>
</div>
</div>

<div class="control-buttons">
<button class="control-btn secondary" id="flip-camera-btn" title="Balik Kamera" disabled>
<span>ğŸ”„</span>
<span>Balik Kamera</span>
</button>
<button class="control-btn primary" id="record-btn" title="Mulai Rekam" disabled>
<span id="record-icon">âºï¸</span>
<span id="record-text">Mulai Rekam</span>
</button>
<button class="control-btn danger" id="stop-camera-btn" title="Stop Kamera" style="display: none;">
<span>â¹ï¸</span>
<span>Stop Kamera</span>
</button>
</div>
</div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="js/firebase.js"></script>
<script src="js/room.js"></script>
<script src="js/custom-modal.js"></script>

<!-- âœ… SECURITY SCRIPT MUST BE FIRST! -->
<script src="js/video-panel-page.js"></script>
<script src="js/video-panel.js"></script>

<!-- âœ… SETUP LOGOUT BUTTON -->
<script>
// Event listener untuk logout button
document.getElementById('logout-btn').addEventListener('click', function() {
  logout(); // Function dari video-panel-page.js
});
</script>
</body>
</html>