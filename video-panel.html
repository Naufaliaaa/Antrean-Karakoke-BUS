<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Camera Panel - Karaoke Bus</title>
<link rel="stylesheet" href="css/video-panel.css">
</head>
<body>
<div class="container">
<!-- Header -->
<div class="header">
<a href="#" id="back-btn" class="back-button">
<span>â†</span>
<span>Kembali</span>
</a>
<h1>ğŸ¥ Camera Panel</h1>
<p class="subtitle">Streaming ke Display Bus</p>
<!-- âœ¨ LOGOUT BUTTON -->
<button id="logout-btn" class="logout-button">
<span>ğŸšª</span>
<span>Logout</span>
</button>
</div>

<!-- Camera Preview -->
<div class="camera-preview" id="camera-preview">
<video id="local-video" autoplay playsinline muted></video>
<div class="camera-overlay" id="camera-overlay">
<div class="overlay-message">
<span class="icon">ğŸ“·</span>
<p>Kamera Belum Aktif</p>
<button class="btn-primary" id="start-camera-btn">Aktifkan Kamera</button>
</div>
</div>
</div>

<!-- Controls -->
<div class="controls-panel">
<div class="status-bar">
<div class="status-item">
<span class="label">Status:</span>
<span class="value" id="connection-status">Offline</span>
<span class="status-dot" id="status-dot"></span>
</div>
<div class="status-item">
<span class="label">Streaming:</span>
<span class="value" id="streaming-status">Tidak Aktif</span>
</div>
<div class="status-item" id="recording-status-bar" style="display: none;">
<span class="label">Recording:</span>
<span class="value recording-time" id="recording-time">00:00</span>
</div>
</div>

<div class="control-buttons">
<button class="control-btn secondary" id="flip-camera-btn" title="Balik Kamera" disabled>
<span>ğŸ”„</span>
<span>Balik Kamera</span>
</button>
<button class="control-btn primary" id="record-btn" title="Mulai Rekam" disabled>
<span id="record-icon">âºï¸</span>
<span id="record-text">Mulai Rekam</span>
</button>
<button class="control-btn danger" id="stop-camera-btn" title="Stop Kamera" style="display: none;">
<span>â¹ï¸</span>
<span>Stop Kamera</span>
</button>
</div>
</div>
</div>

<!-- âœ… CRITICAL: URUTAN SCRIPT HARUS BENAR! -->

<!-- 1. Custom Modal (First!) -->
<script src="js/custom-modal.js"></script>

<!-- 2. Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<!-- 3. Firebase Init -->
<script src="js/firebase.js"></script>

<!-- 4. Room Manager -->
<script src="js/room.js"></script>

<!-- 5. Security Check & Logout Setup (MUST BE BEFORE video-panel.js!) -->
<script src="js/video-panel-page.js"></script>

<!-- 6. Main Video Panel Logic (LAST!) -->
<script src="js/video-panel.js"></script>

</body>
</html>